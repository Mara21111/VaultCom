<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">

<app-base-ui
  [title]="'All Users'"
  [titleOn]="true"
  [searchOn]="true"
  [closeOn]="true"
  [closeRoute]="'/admin-menu'">
</app-base-ui>


<div class="main-container">
  <div class="users-container">
    <div class="content-area">

      <!-- All Users -->
      <section class="panel users-panel">
        <div class="table-header">
          <div class="col-header">Username</div>
          <div class="col-header">Email</div>
          <div class="col-header">Report count</div>
        </div>
        <div class="table-body">
          <div class="table-row" (click)="this.goToUser(item.id)" *ngFor="let item of users" style="cursor: pointer;">
            <div class="col username">{{ item.username }}</div>
            <div class="col">{{ item.email }}</div>
            <div class="col">{{ this.getReportsCount(item.id) }}</div>
          </div>
        </div>
      </section>

    </div>
  </div>
</div>


<!-- User Info Side Panel -->
<div class="overlay" *ngIf="panelVisible" (click)="closePanel()"></div>

<div class="side-panel" *ngIf="panelVisible">
  <button class="close-button" (click)="closePanel()" aria-label="Close panel">&times;</button>
  <h2>User Info</h2>

  <div class="info-group">
    <div class="info-row">
      <span class="info-label">Username:</span>
      <span class="info-value">{{ selectedUser?.username }}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Email:</span>
      <span class="info-value">{{ selectedUser?.email }}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Phone:</span>
      <span class="info-value">{{ selectedUser?.phone_Number || 'not set' }}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Date Created:</span>
      <span class="info-value">{{ selectedUser?.created_At }}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Ban Ends:</span>
      <span class="info-value">{{ selectedUser?.ban_End }}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Reports Count:</span>
      <span class="info-value">{{ reportCount }}</span>
    </div>
  </div>

  <div class="button-group">
    <button class="action-button timeout-button">Time-out</button>
    <button class="action-button ban-button">Ban</button>
  </div>
</div>
